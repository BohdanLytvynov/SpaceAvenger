<Window x:Class="SpaceAvenger.Editor.Views.AnimationConfigurationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SpaceAvenger.Editor.Views"
        xmlns:vm="clr-namespace:SpaceAvenger.Editor.ViewModels"
        xmlns:controls="clr-namespace:WPFGameEngine.Editor.Controls;assembly=WPFGameEngine"
        xmlns:oxy="http://oxyplot.org/wpf"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance vm:AnimationConfigurationViewModel, IsDesignTimeCreatable=True}"
        Title="{Binding Title}" Height="800" Width="800">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="35"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="169*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="93*"/>
        </Grid.ColumnDefinitions>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="290*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="143*"/>
            </Grid.RowDefinitions>
            <Grid Grid.Row="0">
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition Height="70"/>
                </Grid.RowDefinitions>
                <Border Margin="5" Style="{StaticResource BorderRoundStyle}">
                    <Border.Background>
                        <SolidColorBrush Color="{Binding ElementName=picker, Path=SelectedColor, UpdateSourceTrigger=PropertyChanged}"/>
                    </Border.Background>
                    <Label Content="{Binding GameView, UpdateSourceTrigger=PropertyChanged}"
                           />
                </Border>
                <Border Margin="5" Style="{StaticResource BorderRoundStyle}" Grid.Row="1">
                    <StackPanel Orientation="Vertical" Margin="4">
                        <Slider 
                            TickPlacement="BottomRight" TickFrequency="1"
                            Value="{Binding CurrentIndex, UpdateSourceTrigger=PropertyChanged}"
                            Foreground="Black"
                            Minimum="0" 
                            Maximum="{Binding FrameIndexes, UpdateSourceTrigger=PropertyChanged}"
                            IsEnabled="False"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5,0,0">
                            <Button Content="Start" Margin="0,0,10,0"
                                    Command="{Binding OnStartButtonPressed}"/>
                            <Button Content="Pause" Margin="0,0,10,0"
                                    Command="{Binding OnPauseButtonPressed}"/>
                            <Button Content="Reset" 
                                    Command="{Binding OnResetButtonPressed}"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>
            <GridSplitter Grid.Row="1" Style="{StaticResource HorizontalGridSplitter}"/>
            <Grid Grid.Row="2">
                <Border Style="{StaticResource BorderRoundStyle}" Margin="5">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Orientation="Vertical" Height="400">
                            <StackPanel Orientation="Horizontal" Margin="5">
                                <TextBlock Text="Choose Easing: " Style="{StaticResource FieldName}"/>
                                <ComboBox MinWidth="150" Style="{StaticResource ConboboxStyle}"
                                          ItemsSource="{Binding EasingTypes, 
                                    UpdateSourceTrigger=PropertyChanged}"
                                          SelectedItem="{Binding SelectedEase, 
                                    UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                          DisplayMemberPath="DisplayName"
                                          IsEnabled="{Binding EaseEnabled, UpdateSourceTrigger=PropertyChanged}"
                                          />
                                <TextBlock Text="Background: " Margin="5,0,0,0"
                                           Style="{StaticResource FieldName}"/>
                                <xctk:ColorPicker x:Name="picker"/>
                            </StackPanel>
                            <oxy:PlotView 
                                Model="{Binding PlotModel, UpdateSourceTrigger=PropertyChanged}" 
                                Margin="5" Height="220"/>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
            </Grid>
        </Grid>
        <GridSplitter Grid.Column="1" Style="{StaticResource VerticalGridSplitter}"/>
        <Border Grid.Column="2" Style="{StaticResource BorderRoundStyle}" Margin="5">
            <ScrollViewer VerticalScrollBarVisibility="Visible">
                <StackPanel Orientation="Vertical" Margin="5" MinHeight="1000">
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock Text="Select an Atlas:" Margin="0,0,10,0" Style="{StaticResource FieldName}"/>
                        <ComboBox MinWidth="110" IsEditable="True" Style="{StaticResource ConboboxStyle}"
                                  ItemsSource="{Binding ResourceNames, UpdateSourceTrigger=PropertyChanged}"
                                  SelectedItem="{Binding SelectedResourceName, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                  IsEnabled="{Binding ResourceKeyEnabled, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>

                    <controls:Slider LabelText="Rows:" Minimum="1" Maximum="100" Margin="5"
                                     Value="{Binding Rows, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                    <controls:Slider LabelText="Columns:" Margin="5" Minimum="1" Maximum="100"
                                     Value="{Binding Columns, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <TextBlock  Style="{StaticResource FieldName}"
                                   Text="{Binding TotalFrameCount, UpdateSourceTrigger=PropertyChanged, 
                            StringFormat='Total Frame Count:{0}'}"
                                   />
                    </StackPanel>
                    <controls:Slider Margin="5" LabelText="Total Animation Time:(ms)" Minimum="1000" Maximum="10000"
                                     Value="{Binding TotalTime, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                     />
                    <controls:Slider LabelText="Animation Speed:" Margin="5" Minimum="0" Maximum="100"
                                     Value="{Binding AnimationSpeed, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                    <StackPanel Orientation="Horizontal" Margin="5">
                        <CheckBox Content="Is Looping" FontSize="16" VerticalContentAlignment="Center"
                                  IsChecked="{Binding IsLooping, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                        <CheckBox Content="Is Reversed" FontSize="16" VerticalContentAlignment="Center"
                                  Margin="10,0,0,0"
                                  IsChecked="{Binding IsReversed, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                    </StackPanel>
                    <Rectangle Style="{StaticResource BorderRectStyle}"/>
                    <TextBlock Text="Additional Constants" Style="{StaticResource DescLabel}"/>
                    <Rectangle Style="{StaticResource BorderRectStyle}"/>
                    <ListView MinHeight="300" ItemsSource="{Binding EaseConstants, 
                        UpdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>
            </ScrollViewer>
        </Border>
        <Grid Grid.Row="1" x:Name="ButtonGrid" Grid.ColumnSpan="3" Margin="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="530*"/>
                <ColumnDefinition Width="120"/>
                <ColumnDefinition Width="29*"/>
                <ColumnDefinition Width="120"/>
                <ColumnDefinition Width="30"/>
            </Grid.ColumnDefinitions>
            <Button Grid.Column="3" Content="Confirm" Command="{Binding OnConfirmButtonPressed}"/>
            <Button Grid.Column="1" Content="Cancel" Command="{Binding OnCancelButtonPressed}"/>
        </Grid>
    </Grid>
</Window>
