<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:userVM="clr-namespace:SpaceAvenger.ViewModels.UserProfile">
    <Style x:Key="UserProfText">
        <Style.Setters>
            <Setter Property="ItemsControl.FontSize" Value="20"/>
            <Setter Property="ItemsControl.Foreground" Value="White"/>
        </Style.Setters>
    </Style>

    <DataTemplate DataType="{x:Type userVM:UserProfileVM}">
        <Border x:Name="brd" CornerRadius="10" Style="{DynamicResource UserProfText}" 
            BorderThickness="2" Margin="10">
            <Border.BorderBrush>
                <LinearGradientBrush>
                    <LinearGradientBrush.RelativeTransform>
                        <RotateTransform x:Name="rtr" Angle="0"/>
                    </LinearGradientBrush.RelativeTransform>

                    <GradientStop x:Name="brd1gs" Color="{StaticResource brdButColor1}" Offset="1"/>
                    <GradientStop x:Name="brd2gs" Color="{StaticResource brdButColor2}" Offset="0"/>
                </LinearGradientBrush>
            </Border.BorderBrush>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Number, UpdateSourceTrigger=PropertyChanged, StringFormat=№{0})}"
                       Margin="10, 40, 0,0" FontSize="30"/>
                <StackPanel Orientation="Vertical" Margin="0,0,0,10">
                    <Image x:Name="userVm_Image" Width="150" Height="150" Margin="40,0"/>
                    <ToggleButton Style="{DynamicResource ToggleButton}"
                              Content="{Binding User.MaleFemale, UpdateSourceTrigger=PropertyChanged
                    ,Converter={StaticResource BoolToFemaleInvertConverter}
                    }" IsChecked="{Binding User.MaleFemale, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                    x:Name="chooseSex_btn"         
                              />
                </StackPanel>
                <StackPanel Orientation="Vertical" Margin="30,0,0,0">
                    <TextBlock Text="Commander Info:" FontSize="22" Margin="0,0,0,10"/>
                    <TextBlock 
                    Text="{Binding EnlistedDate, UpdateSourceTrigger=PropertyChanged, Mode=OneWay, StringFormat=Enlisted: {0:yyyy.MM.dd HH:MM}, Converter={StaticResource DateTimeToStringConverter}, ConverterParameter='Not yet'}" 
                    Margin="0,0,0,10"/>
                    <TextBox Style="{DynamicResource TextBox}" 
                         Text="{Binding User.UserName, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
                         Margin="0,0,0,10" 
                         IsReadOnly="{Binding Confirmed, UpdateSourceTrigger=PropertyChanged}"
                         />
                    <TextBlock Text="{Binding User.Rank, UpdateSourceTrigger=PropertyChanged, Mode=OneWay, StringFormat= Rank: {0}}" Margin="0,0,0,10"/>
                    <TextBlock Text="{Binding User.MissionsCount, UpdateSourceTrigger=PropertyChanged, Mode=OneWay, StringFormat=Missions_Completed: {0}}"/>
                </StackPanel>
                <StackPanel Orientation="Vertical"
                        x:Name="confirm_block" Margin="40,10,20,0">
                    <TextBlock Text="Check your personal info Sir. And if all is correct, press Confirm Profile button bellow. "
                           TextWrapping="WrapWithOverflow" Width="300"
                           FontSize="20" Foreground="White" Margin="10"/>
                    <Button Content="Confirm Profile" Style="{DynamicResource Button}"
                        Command="{Binding OnConfirmButtonPressed}"
                        />

                </StackPanel>

                <StackPanel Orientation="Vertical" x:Name="profile_confirmed_block"
                        Margin="50,0,50,0">
                    <Label Content="Profile Confirmed."                          
                Foreground="LightGreen"
                FontSize="25"
                Margin="{Binding ElementName=confirm_block, Path=Margin, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}"/>
                    <Button Content="Select" Style="{DynamicResource Button}" Margin="0,20"
                        Command="{Binding OnSelectButtonPressed}"/>
                </StackPanel>

            </StackPanel>
        </Border>
        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding Confirmed, UpdateSourceTrigger=PropertyChanged}" Value="True">
                <DataTrigger.Setters>
                    <Setter Property="Visibility" TargetName="chooseSex_btn"
                        Value="Collapsed"/>
                    <Setter Property="Visibility" TargetName="confirm_block"
                        Value="Collapsed"/>
                    <Setter Property="Visibility" TargetName="profile_confirmed_block"
                        Value="Visible"/>
                </DataTrigger.Setters>
            </DataTrigger>

            <DataTrigger Binding="{Binding Confirmed, UpdateSourceTrigger=PropertyChanged}" Value="False">
                <DataTrigger.Setters>
                    <Setter Property="Visibility" TargetName="profile_confirmed_block"
                        Value="Collapsed"/>
                    <Setter Property="Visibility" TargetName="chooseSex_btn"
                        Value="Visible"/>
                    <Setter Property="Visibility" TargetName="confirm_block"
                        Value="Visible"/>
                </DataTrigger.Setters>
            </DataTrigger>
            <!--Show male-->
            <DataTrigger Binding="{Binding User.MaleFemale, 
            UpdateSourceTrigger=PropertyChanged}" Value="True">
                <DataTrigger.Setters>
                    <Setter TargetName="userVm_Image" Property="Source" 
                        Value="pack://siteoforigin:,,,/Images/Chars/Commanders/CommandersM.png"/>
                </DataTrigger.Setters>
            </DataTrigger>
            <!--Show female-->
            <DataTrigger Binding="{Binding User.MaleFemale, 
            UpdateSourceTrigger=PropertyChanged}" Value="False">
                <DataTrigger.Setters>
                    <Setter TargetName="userVm_Image" Property="Source" 
                        Value="pack://siteoforigin:,,,/Images/Chars/Commanders/CommandersF.png"/>
                </DataTrigger.Setters>
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>
</ResourceDictionary>